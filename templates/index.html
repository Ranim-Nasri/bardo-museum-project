
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bardo Museum - Tunisia's Premier Archaeological Museum</title>
    <meta name="description" content="Explore the world-renowned Bardo Museum in Tunisia, home to one of the finest collections of Roman mosaics and Classical antiquities.">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <header>
        <div class="header-inner">
            <div class="logo">
                <img src="/static/10.jpg" alt="Bardo Museum Logo">
            </div>
            <nav>
                <a href="#home">Home</a>
                <a href="/categories-page">Categories</a>
                <a href="#contact">Contact</a>
                <a href="/map">Map</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero" id="home">
            <div class="hero-slider">
                <img src="/static/8.jpg" alt="Bardo Museum Interior" class="hero-image">
            </div>
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <h1>Bardo Museum</h1>
                <p>Journey Through Centuries of Mediterranean Civilization</p>
                <a href="/categories-page" class="cta-button">Explore Categories</a>

            </div>
        </section>

        <section id="virtual-visitors" class="virtual-experience">
            <h2>For Virtual Visitors</h2>
            <section class="welcome">
                <div class="welcome-grid">
                    <div class="welcome-content">
                        <h2>A Journey Through Time</h2>
                        <p>The Bardo Museum, located in Tunis, Tunisia, stands as one of the oldest and most prestigious museums in the world. Our halls house an extraordinary collection of Roman mosaics, Islamic art, and Carthaginian artifacts.</p>
                        <p>Each exhibit tells a story of the civilizations that shaped this region, offering visitors a unique glimpse into the rich cultural heritage of Tunisia and the Mediterranean world.</p>
                    </div>
                    <div class="welcome-image">
                        <img src="/static/13.jpg" alt="Museum Gallery">
                    </div>
                </div>
            </section>
            <section class="qr-section">
                <div class="qr-content">
                    <h2>Experience Virtual Tour</h2>
                    <p>Explore our magnificent collections from anywhere in the world through our immersive virtual tour.</p>
                    <!-- QR Code for On-Site Visitors -->
                    <div class="qr-code">
                        <img src="/static/museum_tour_qr.png" alt="QR Code for Virtual Tour">
                        <p>Scan the QR code to access the tour on your mobile device.</p>
                    </div>
                </div>
            </section>
            
            <section class="map-section">
                <div class="embedded-map">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!4v1734793010893!6m8!1m7!1s7HOBVjjNH7i1-ea0qCLz8A!2m2!1d36.80957892103784!2d10.134372935434!3f64.52330371816717!4f-3.144995300751347!5f0.7820865974627469" 
                        width="100%" 
                        height="400" 
                        style="border:0; border-radius: 8px;" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                    <p>Explore the museum virtually on your desktop.</p>
                </div>
                <div class="audio-button">
                    <button class="cta-button" onclick="playMuseumAudio()">Listen to the Museum's History in English</button>
                </div>
            </section>
            <audio id="museum-audio" src="/static/museum_history.mp3"></audio>
            
        
            <div class="quiz">
                <h3>Educational Quiz</h3>
                <p>Test your knowledge about the museum and its artifacts.</p>
                <button class="cta-button" onclick="startQuiz()">Start Quiz</button>
                
                <div id="quiz-container" style="display: none;">
                    <div id="question-text"></div>
                    <div id="options-container"></div>
                    <div id="result"></div>
                    <button id="next-button" style="display: none;" onclick="nextQuestion()">Next Question</button>
                </div>
            </div>
                
            </div>
        </section>
        
        <section id="on-site-visitors" class="on-site-engagement">
            <h2>For On-Site Visitors</h2>
            <div class="feedback-section">
                <h3>Share Your Experience</h3>
                <form id="feedback-form" class="feedback-form">
                    <div class="form-group">
                        <label for="visitor-name">Name</label>
                        <input type="text" id="visitor-name" required>
                    </div>
                    <div class="form-group">
                        <label for="visit-date">Date of Visit</label>
                        <input type="date" id="visit-date" required>
                    </div>
                    <div class="form-group">
                        <label for="feedback-input">Your Experience</label>
                        <textarea id="feedback-input" placeholder="Share your thoughts about your visit..." required></textarea>
                    </div>
                    <button type="submit" class="cta-button">Submit Feedback</button>
                </form>
            </div>
            <div class="sentiment-analysis">
                <h3>What Visitors Are Saying</h3>
                <div id="feedback-carousel" class="carousel">
                    <div id="feedback-display" class="carousel-inner"></div>
                    <button id="prev-feedback" class="carousel-control prev">←</button>
                    <button id="next-feedback" class="carousel-control next">→</button>
                </div>
            </div>
            
            
            </div>
        </section>
    </main>

    <footer id="contact">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Contact</h3>
                <p>Email: info@bardomuseum.tn</p>
                <p>Phone: +216 71 513 650</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Bardo Museum. All rights reserved.</p>
        </div>
    </footer>
    
    <script>

function showCustomAlert(message, isError = false) {
    const alert = document.createElement('div');
    alert.className = 'custom-alert';
    if (isError) {
        alert.style.backgroundColor = 'var(--deep-brown)';
        alert.style.color = 'var(--primary-beige)';
    }
    alert.textContent = message;
    
    document.body.appendChild(alert);
    
    setTimeout(() => {
        alert.style.animation = 'fadeOut 0.5s ease-in-out';
        setTimeout(() => {
            alert.remove();
        }, 500);
    }, 3000);
}


let lastSubmittedFeedback = null;
document.getElementById('feedback-form').addEventListener('submit', async function(event) {
    event.preventDefault();
    
    const visitorName = document.getElementById('visitor-name').value;
    const visitDate = document.getElementById('visit-date').value;
    const feedbackText = document.getElementById('feedback-input').value;
    
    const feedbackData = {
        visitor_name: visitorName,
        visit_date: visitDate,
        feedback_text: feedbackText
    };

    if (JSON.stringify(feedbackData) === JSON.stringify(lastSubmittedFeedback)) {
        showCustomAlert("This feedback has already been submitted.", true);
        return;
    }

    const submitButton = event.target.querySelector('button[type="submit"]');
    submitButton.disabled = true;

    try {
        const response = await fetch('/feedback', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(feedbackData)
        });

        const result = await response.json();
        
        if (response.ok) {
            lastSubmittedFeedback = feedbackData;
            showCustomAlert("Thank you for your feedback!");
            document.getElementById('feedback-form').reset();
        } else {
            showCustomAlert(result.error, true);
        }
    } catch (error) {
        showCustomAlert(`An error occurred: ${error.message}`, true);
    } finally {
        submitButton.disabled = false;
    }
});
document.addEventListener("DOMContentLoaded", async () => {
    const feedbackDisplay = document.getElementById("feedback-display");
    const prevButton = document.getElementById("prev-feedback");
    const nextButton = document.getElementById("next-feedback");

    let feedbackEntries = [];
    let currentIndex = 0;

    try {
        const response = await fetch("/feedback");
        feedbackEntries = await response.json();

        if (feedbackEntries.length === 0) {
            feedbackDisplay.innerHTML = "<p>No feedback entries yet. Be the first to leave your thoughts!</p>";
            prevButton.style.display = "none";
            nextButton.style.display = "none";
            return;
        }

        // Render the first feedback
        renderFeedback(currentIndex);

        // Add event listeners for buttons
        prevButton.addEventListener("click", () => {
            currentIndex = (currentIndex - 1 + feedbackEntries.length) % feedbackEntries.length;
            renderFeedback(currentIndex);
        });

        nextButton.addEventListener("click", () => {
            currentIndex = (currentIndex + 1) % feedbackEntries.length;
            renderFeedback(currentIndex);
        });

        // Auto-slide every 5 seconds
        setInterval(() => {
            currentIndex = (currentIndex + 1) % feedbackEntries.length;
            renderFeedback(currentIndex);
        }, 5000);
    } catch (error) {
        feedbackDisplay.innerHTML = `<p>Error loading feedback: ${error.message}</p>`;
        prevButton.style.display = "none";
        nextButton.style.display = "none";
    }

    function renderFeedback(index) {
        const entry = feedbackEntries[index];
        feedbackDisplay.innerHTML = `
            <div class="guestbook-entry">
                <blockquote>${entry.feedback_text}</blockquote>
                <div class="visitor-info">
                    <span>— ${entry.visitor_name || "Anonymous Visitor"}</span>
                    <span>${new Date(entry.visit_date).toLocaleDateString()}</span>
                </div>
            </div>
        `;
    }
});
function playMuseumAudio() {
    const audioElement = document.getElementById("museum-audio");

    if (audioElement) {
        audioElement.play();
        audioElement.addEventListener("ended", () => {
            showCustomAlert("Thank you for listening to the history of the Bardo Museum!");
        });
    } else {
        showCustomAlert("Audio file not found. Please try again later.");
    }
}

let questions = [];
let currentQuestionIndex = 0;
let score = 0;

async function startQuiz() {
    try {
        const response = await fetch('/quiz_questions');
        questions = await response.json();
        
        document.querySelector('.cta-button').style.display = 'none';
        document.getElementById('quiz-container').style.display = 'block';
        showQuestion();
    } catch (error) {
        console.error('Error loading questions:', error);
    }
}

function showQuestion() {
    const question = questions[currentQuestionIndex];
    document.getElementById('question-text').innerHTML = `
        <h4>Question ${currentQuestionIndex + 1}/${questions.length}</h4>
        <p>${question.question_text}</p>
    `;
    
    const optionsContainer = document.getElementById('options-container');
    optionsContainer.innerHTML = '';
    
    Object.entries(question.options).forEach(([key, value]) => {
        const button = document.createElement('button');
        button.textContent = `${key.toUpperCase()}. ${value}`;
        button.onclick = () => checkAnswer(key);
        optionsContainer.appendChild(button);
    });
}

function checkAnswer(selectedOption) {
    const question = questions[currentQuestionIndex];
    const buttons = document.querySelectorAll('#options-container button');
    
    buttons.forEach(button => {
        button.disabled = true;
        const option = button.textContent.charAt(0).toLowerCase();
        
        if (option === question.correct_option) {
            button.style.backgroundColor = '#90EE90'; // Green for correct
        } else if (option === selectedOption) {
            button.style.backgroundColor = '#FFB6C1'; // Red for wrong
        }
    });
    
    if (selectedOption === question.correct_option) {
        score++;
    }
    
    document.getElementById('next-button').style.display = 'block';
}

function nextQuestion() {
    currentQuestionIndex++;
    
    if (currentQuestionIndex < questions.length) {
        showQuestion();
        document.getElementById('next-button').style.display = 'none';
    } else {
        showResults();
    }
}

function showResults() {
    const percentage = (score / questions.length) * 100;
    document.getElementById('quiz-container').innerHTML = `
        <div class="quiz-results">
            <h3>Quiz Complete!</h3>
            <div class="score-display">
                <p>Your Score</p>
                <div class="score-number">${score}/${questions.length}</div>
                <div class="score-percentage">${percentage.toFixed(1)}%</div>
            </div>
            <button class="retry-button" onclick="location.reload()">Try Again</button>
        </div>
    `;
}

    </script>
    
    
</body>
</html>

